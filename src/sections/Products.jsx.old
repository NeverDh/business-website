import React, { useState } from 'react';
import { Container, Card, Col, Row, Button } from 'react-bootstrap';
import './Products.css';

function Products() {
  const [index, setIndex] = useState(0);

  const items = [
    { title: 'Teleprompter com monitor de retorno', text: 'Para shows, apresentações, premiações, etc.' },
    { title: 'Teleprompter portátil', text: 'Ideal para eventos e produções móveis.' },
    { title: 'Monitores de alta definição', text: 'Para exibição de texto claro e visível.' },
    { title: 'Teleprompter com monitor de retorno', text: 'Para shows, apresentações, premiações, etc.' },
    { title: 'Teleprompter portátil', text: 'Ideal para eventos e produções móveis.' },
    { title: 'Monitores de alta definição', text: 'Para exibição de texto claro e visível.' }
  ];

  const chunkSize = 3;

  const handlePrev = () => {
    setIndex((prevIndex) => (prevIndex === 0 ? items.length - 1 : prevIndex - 1));
  };

  const handleNext = () => {
    setIndex((prevIndex) => (prevIndex === items.length - 1 ? 0 : prevIndex + 1));
  };

  const getItemsForSlide = () => {
    const startIndex = index;
    const endIndex = index + chunkSize;
    const itemsForSlide = items.slice(startIndex, endIndex);

    if (itemsForSlide.length < chunkSize) {
      itemsForSlide.push(...items.slice(0, chunkSize - itemsForSlide.length));
    }

    return itemsForSlide;
  };

  const renderIndicators = () => {
    return (
      <div className="carousel-indicators">
        {items.map((_, i) => (
          <button
            key={i}
            type="button"
            className={`indicator ${i === index ? 'active' : ''}`}
            onClick={() => setIndex(i)}
          />
        ))}
      </div>
    );
  };

  return (
    <section id="products">
      <Container className="py-5">
        <h1 className="text-center mb-5">Produtos</h1>
        <div className="custom-carousel ">
          <Button variant="outline-dark" className="carousel-control-prev" onClick={handlePrev}>
            <span aria-hidden="true" className="carousel-control-prev-icon" />
          </Button>
          <div className="carousel-inner">
            <Row className="transition-slide">
              {getItemsForSlide().map((item, idx) => (
                <Col md={4} key={idx} className="d-flex align-items-stretch transition-slide">
                  <Card className="mb-4">
                    <Card.Body>
                      <Card.Title>{item.title}</Card.Title>
                      <Card.Text>{item.text}</Card.Text>
                    </Card.Body>
                  </Card>
                </Col>
              ))}
            </Row>
          </div>
          <Button variant="outline-dark" className="carousel-control-next" onClick={handleNext}>
            <span aria-hidden="true" className="carousel-control-next-icon" />
          </Button>
          {renderIndicators()}
        </div>
      </Container>
    </section>
  );
}

export default Products;
